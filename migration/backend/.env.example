# ============================================================================
# Badge Engine Backend - Environment Variables
# ============================================================================
# Copy this file to .env and fill in your actual values
# DO NOT commit .env to version control

# ============================================================================
# Application Configuration
# ============================================================================
# Environment: development, staging, production
ENV=development

# Enable debug mode (shows detailed error messages)
# Set to "true" for development, "false" for production
DEBUG=true

# CORS allowed origins (comma-separated)
# For development, allow local frontend ports
CORS_ORIGINS=http://localhost:3000,http://localhost:3001

# ============================================================================
# Database Configuration
# ============================================================================
# PostgreSQL connection string
# Format: postgresql://username:password@host:port/database
DATABASE_URL=postgresql://badge_user:badge_pass@localhost:5432/badge_engine

# Enable SQL query logging (for debugging)
# Set to "true" to log all SQL queries, "false" to disable
SQL_ECHO=false

# ============================================================================
# Redis Configuration (Caching & Celery)
# ============================================================================
# Redis host
REDIS_HOST=localhost

# Redis port
REDIS_PORT=6379

# Redis database number (0-15)
REDIS_DB=0

# Redis password (leave empty if no password)
REDIS_PASSWORD=

# Cache TTL in seconds (default: 1 hour)
CACHE_TTL=3600

# ============================================================================
# Celery Configuration (Background Tasks)
# ============================================================================
# Celery broker URL (Redis)
CELERY_BROKER_URL=redis://localhost:6379/1

# Celery result backend URL (Redis)
CELERY_RESULT_BACKEND=redis://localhost:6379/1

# ============================================================================
# Microsoft Entra ID (Azure AD) SSO Configuration
# ============================================================================
# Entra ID Application (Client) ID
# Get this from Azure Portal > App Registrations
ENTRA_CLIENT_ID=your-client-id-here

# Entra ID Client Secret
# Get this from Azure Portal > App Registrations > Certificates & secrets
ENTRA_CLIENT_SECRET=your-client-secret-here

# Entra ID Tenant ID
# Your Azure AD tenant ID (can be "common" for multi-tenant)
ENTRA_TENANT_ID=your-tenant-id-here

# OAuth redirect URI (must match Azure Portal configuration)
ENTRA_REDIRECT_URI=http://localhost:8000/auth/callback

# Admin groups (comma-separated group names)
# Users in these groups will have admin access
# Leave empty to allow all authenticated users admin access
ENTRA_ADMIN_GROUPS=Badge Admins,Administrators

# Issuer groups (comma-separated group names)
# Users in these groups can issue badges
# Default: "Issuers"
ENTRA_ISSUER_GROUPS=Issuers

# ============================================================================
# Logging Configuration
# ============================================================================
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log format: "json" for structured logs, "text" for human-readable
LOG_FORMAT=json

# ============================================================================
# Security (Optional - for production)
# ============================================================================
# Secret key for session signing (generate a random string)
# SECRET_KEY=your-secret-key-here

# JWT secret for token signing (if using custom JWT)
# JWT_SECRET=your-jwt-secret-here

# ============================================================================
# Development/Testing
# ============================================================================
# For local development without Entra ID, you can disable auth
# DISABLE_AUTH=false
